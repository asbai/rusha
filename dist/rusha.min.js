/*! rusha 2017-11-26 */

(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var r;if(typeof window!=="undefined"){r=window}else if(typeof global!=="undefined"){r=global}else if(typeof self!=="undefined"){r=self}else{r=this}r.Rusha=e()}})(function(){var e,r,n;return function e(r,n,t){function a(i,o){if(!n[i]){if(!r[i]){var s=typeof require=="function"&&require;if(!o&&s)return s(i,!0);if(f)return f(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[i]={exports:{}};r[i][0].call(c.exports,function(e){var n=r[i][1][e];return a(n?n:e)},c,c.exports,e,r,n,t)}return n[i].exports}var f=typeof require=="function"&&require;for(var i=0;i<t.length;i++)a(t[i]);return a}({1:[function(e,r,n){var t=arguments[3];var a=arguments[4];var f=arguments[5];var i=JSON.stringify;r.exports=function(e,r){var n;var o=Object.keys(f);for(var s=0,u=o.length;s<u;s++){var c=o[s];var h=f[c].exports;if(h===e||h&&h.default===e){n=c;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var v={};for(var s=0,u=o.length;s<u;s++){var c=o[s];v[c]=c}a[n]=["function(require,module,exports){"+e+"(self); }",v]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var l={};l[n]=n;a[d]=["function(require,module,exports){"+"var f = require("+i(n)+");"+"(f.default ? f.default : f)(self);"+"}",l];var p={};w(d);function w(e){p[e]=true;for(var r in a[e][1]){var n=a[e][1][r];if(!p[n]){w(n)}}}var y="("+t+")({"+Object.keys(p).map(function(e){return i(e)+":["+a[e][0]+","+i(a[e][1])+"]"}).join(",")+"},{},["+i(d)+"])";var b=window.URL||window.webkitURL||window.mozURL||window.msURL;var g=new Blob([y],{type:"text/javascript"});if(r&&r.bare){return g}var A=b.createObjectURL(g);var L=new Worker(A);L.objectURL=A;return L}},{}],2:[function(e,r,n){r.exports=function e(r,n,t){"use asm";var a=new r.Int32Array(t);function f(e,r){e=e|0;r=r|0;var n=0,t=0,f=0,i=0,o=0,s=0,u=0,c=0,h=0,v=0,d=0,l=0,p=0,w=0;f=a[r+320>>2]|0;o=a[r+324>>2]|0;u=a[r+328>>2]|0;h=a[r+332>>2]|0;d=a[r+336>>2]|0;for(n=0;(n|0)<(e|0);n=n+64|0){i=f;s=o;c=u;v=h;l=d;for(t=0;(t|0)<64;t=t+4|0){w=a[n+t>>2]|0;p=((f<<5|f>>>27)+(o&u|~o&h)|0)+((w+d|0)+1518500249|0)|0;d=h;h=u;u=o<<30|o>>>2;o=f;f=p;a[e+t>>2]=w}for(t=e+64|0;(t|0)<(e+80|0);t=t+4|0){w=(a[t-12>>2]^a[t-32>>2]^a[t-56>>2]^a[t-64>>2])<<1|(a[t-12>>2]^a[t-32>>2]^a[t-56>>2]^a[t-64>>2])>>>31;p=((f<<5|f>>>27)+(o&u|~o&h)|0)+((w+d|0)+1518500249|0)|0;d=h;h=u;u=o<<30|o>>>2;o=f;f=p;a[t>>2]=w}for(t=e+80|0;(t|0)<(e+160|0);t=t+4|0){w=(a[t-12>>2]^a[t-32>>2]^a[t-56>>2]^a[t-64>>2])<<1|(a[t-12>>2]^a[t-32>>2]^a[t-56>>2]^a[t-64>>2])>>>31;p=((f<<5|f>>>27)+(o^u^h)|0)+((w+d|0)+1859775393|0)|0;d=h;h=u;u=o<<30|o>>>2;o=f;f=p;a[t>>2]=w}for(t=e+160|0;(t|0)<(e+240|0);t=t+4|0){w=(a[t-12>>2]^a[t-32>>2]^a[t-56>>2]^a[t-64>>2])<<1|(a[t-12>>2]^a[t-32>>2]^a[t-56>>2]^a[t-64>>2])>>>31;p=((f<<5|f>>>27)+(o&u|o&h|u&h)|0)+((w+d|0)-1894007588|0)|0;d=h;h=u;u=o<<30|o>>>2;o=f;f=p;a[t>>2]=w}for(t=e+240|0;(t|0)<(e+320|0);t=t+4|0){w=(a[t-12>>2]^a[t-32>>2]^a[t-56>>2]^a[t-64>>2])<<1|(a[t-12>>2]^a[t-32>>2]^a[t-56>>2]^a[t-64>>2])>>>31;p=((f<<5|f>>>27)+(o^u^h)|0)+((w+d|0)-899497514|0)|0;d=h;h=u;u=o<<30|o>>>2;o=f;f=p;a[t>>2]=w}f=f+i|0;o=o+s|0;u=u+c|0;h=h+v|0;d=d+l|0}a[r+320>>2]=f;a[r+324>>2]=o;a[r+328>>2]=u;a[r+332>>2]=h;a[r+336>>2]=d}return{hash:f}}},{}],3:[function(e,r,n){var t=e("webworkify");var a=e("./rusha.js");if(typeof FileReaderSync!=="undefined"){e("./worker")()}r.exports=a;a.createWorker=function r(){var n=t(e("./worker"));var a=n.terminate;n.terminate=function(){URL.revokeObjectURL(n.objectURL);a.call(n)};return n}},{"./rusha.js":4,"./worker":5,webworkify:1}],4:[function(e,r,n){(function(n){"use strict";var t=e("./core.sjs");r.exports=function e(r){var f={getDataType:function(e){if(typeof e==="string"){return"string"}if(e instanceof Array){return"array"}if(typeof n!=="undefined"&&n.Buffer&&n.Buffer.isBuffer(e)){return"buffer"}if(e instanceof ArrayBuffer){return"arraybuffer"}if(e.buffer instanceof ArrayBuffer){return"view"}if(e instanceof Blob){return"blob"}throw new Error("Unsupported data type.")}};var i={fill:0};var o=function(e){for(e+=9;e%64>0;e+=1);return e};var s=function(e,r){var n=new Uint8Array(e.buffer);var t=r%4,a=r-t;switch(t){case 0:n[a+3]=0;case 1:n[a+2]=0;case 2:n[a+1]=0;case 3:n[a+0]=0}for(var f=(r>>2)+1;f<e.length;f++)e[f]=0};var u=function(e,r,n){e[r>>2]|=128<<24-(r%4<<3);e[((r>>2)+2&~15)+14]=n/(1<<29)|0;e[((r>>2)+2&~15)+15]=n<<3};var c=function(e,r,n,t,a){var f=this,i,o=a%4,s=(t+o)%4,u=t-s;switch(o){case 0:e[a]=f.charCodeAt(n+3);case 1:e[a+1-(o<<1)|0]=f.charCodeAt(n+2);case 2:e[a+2-(o<<1)|0]=f.charCodeAt(n+1);case 3:e[a+3-(o<<1)|0]=f.charCodeAt(n)}if(t<s+o){return}for(i=4-o;i<u;i=i+4|0){r[a+i>>2]=f.charCodeAt(n+i)<<24|f.charCodeAt(n+i+1)<<16|f.charCodeAt(n+i+2)<<8|f.charCodeAt(n+i+3)}switch(s){case 3:e[a+u+1|0]=f.charCodeAt(n+u+2);case 2:e[a+u+2|0]=f.charCodeAt(n+u+1);case 1:e[a+u+3|0]=f.charCodeAt(n+u)}};var h=function(e,r,n,t,a){var f=this,i,o=a%4,s=(t+o)%4,u=t-s;switch(o){case 0:e[a]=f[n+3];case 1:e[a+1-(o<<1)|0]=f[n+2];case 2:e[a+2-(o<<1)|0]=f[n+1];case 3:e[a+3-(o<<1)|0]=f[n]}if(t<s+o){return}for(i=4-o;i<u;i=i+4|0){r[a+i>>2|0]=f[n+i]<<24|f[n+i+1]<<16|f[n+i+2]<<8|f[n+i+3]}switch(s){case 3:e[a+u+1|0]=f[n+u+2];case 2:e[a+u+2|0]=f[n+u+1];case 1:e[a+u+3|0]=f[n+u]}};var v=function(e,r,n,t,f){var i=this,o,s=f%4,u=(t+s)%4,c=t-u;var h=new Uint8Array(a.readAsArrayBuffer(i.slice(n,n+t)));switch(s){case 0:e[f]=h[3];case 1:e[f+1-(s<<1)|0]=h[2];case 2:e[f+2-(s<<1)|0]=h[1];case 3:e[f+3-(s<<1)|0]=h[0]}if(t<u+s){return}for(o=4-s;o<c;o=o+4|0){r[f+o>>2|0]=h[o]<<24|h[o+1]<<16|h[o+2]<<8|h[o+3]}switch(u){case 3:e[f+c+1|0]=h[c+2];case 2:e[f+c+2|0]=h[c+1];case 1:e[f+c+3|0]=h[c]}};var d=function(e){switch(f.getDataType(e)){case"string":return c.bind(e);case"array":return h.bind(e);case"buffer":return h.bind(e);case"arraybuffer":return h.bind(new Uint8Array(e));case"view":return h.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return v.bind(e)}};var l=function(e,r){switch(f.getDataType(e)){case"string":return e.slice(r);case"array":return e.slice(r);case"buffer":return e.slice(r);case"arraybuffer":return e.slice(r);case"view":return e.buffer.slice(r)}};var p=new Array(256);for(var w=0;w<256;w++){p[w]=(w<16?"0":"")+w.toString(16)}var y=function(e){var r=new Uint8Array(e);var n=new Array(e.byteLength);for(var t=0;t<n.length;t++){n[t]=p[r[t]]}return n.join("")};var b=function(e){var r;if(e<=65536)return 65536;if(e<16777216){for(r=1;r<e;r=r<<1);}else{for(r=16777216;r<e;r+=16777216);}return r};var g=function(e){if(e%64>0){throw new Error("Chunk size must be a multiple of 128 bit")}i.offset=0;i.maxChunkLen=e;i.padMaxChunkLen=o(e);i.heap=new ArrayBuffer(b(i.padMaxChunkLen+320+20));i.h32=new Int32Array(i.heap);i.h8=new Int8Array(i.heap);i.core=new t({Int32Array:Int32Array,DataView:DataView},{},i.heap);i.buffer=null};g(r||64*1024);var A=function(e,r){i.offset=0;var n=new Int32Array(e,r+320,5);n[0]=1732584193;n[1]=-271733879;n[2]=-1732584194;n[3]=271733878;n[4]=-1009589776};var L=function(e,r){var n=o(e);var t=new Int32Array(i.heap,0,n>>2);s(t,e);u(t,e,r);return n};var x=function(e,r,n,t){d(e)(i.h8,i.h32,r,n,t||0)};var k=function(e,r,n,t,a){var f=n;x(e,r,n);if(a){f=L(n,t)}i.core.hash(f,i.padMaxChunkLen)};var C=function(e,r){var n=new Int32Array(e,r+320,5);var t=new Int32Array(5);var a=new DataView(t.buffer);a.setInt32(0,n[0],false);a.setInt32(4,n[1],false);a.setInt32(8,n[2],false);a.setInt32(12,n[3],false);a.setInt32(16,n[4],false);return t};var m=this.rawDigest=function(e){var r=e.byteLength||e.length||e.size||0;A(i.heap,i.padMaxChunkLen);var n=0,t=i.maxChunkLen;for(n=0;r>n+t;n+=t){k(e,n,t,r,false)}k(e,n,r-n,r,true);return C(i.heap,i.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return y(m(e).buffer)};this.resetState=function(){A(i.heap,i.padMaxChunkLen);return this};this.append=function(e){var r=0;var n=e.byteLength||e.length||e.size||0;var t=i.offset%i.maxChunkLen;var a;i.offset+=n;while(r<n){a=Math.min(n-r,i.maxChunkLen-t);x(e,r,a,t);t+=a;r+=a;if(t===i.maxChunkLen){i.core.hash(i.maxChunkLen,i.padMaxChunkLen);t=0}}return this};this.getState=function(){var e=i.offset%i.maxChunkLen;var r;if(!e){var n=new Int32Array(i.heap,i.padMaxChunkLen+320,5);r=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}else{r=i.heap.slice(0)}return{offset:i.offset,heap:r}};this.setState=function(e){i.offset=e.offset;if(e.heap.byteLength===20){var r=new Int32Array(i.heap,i.padMaxChunkLen+320,5);r.set(new Int32Array(e.heap))}else{i.h32.set(new Int32Array(e.heap))}return this};var M=this.rawEnd=function(){var e=i.offset;var r=e%i.maxChunkLen;var n=L(r,e);i.core.hash(n,i.padMaxChunkLen);var t=C(i.heap,i.padMaxChunkLen);A(i.heap,i.padMaxChunkLen);return t};this.end=function(){return y(M().buffer)}};r.exports._core=t;if(typeof FileReaderSync!=="undefined"){var a=new FileReaderSync}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./core.sjs":2}],5:[function(e,r,n){r.exports=function r(){var n=e("./rusha.js");var t=function e(r,n,t){try{return t(null,r.digest(n))}catch(e){return t(e)}};var a=function e(r,n,t,a,f){var i=new self.FileReader;i.onloadend=function o(){if(i.error){return f(i.error)}var s=i.result;n+=i.result.byteLength;try{r.append(s)}catch(e){f(e);return}if(n<a.size){e(r,n,t,a,f)}else{f(null,r.end())}};i.readAsArrayBuffer(a.slice(n,n+t))};self.onmessage=function e(r){var f=r.data.data,i=r.data.file,o=r.data.id;if(typeof o==="undefined")return;if(!i&&!f)return;var s=r.data.blockSize||4*1024*1024;var u=new n(s);u.resetState();var c=function e(r,n){if(!r){self.postMessage({id:o,hash:n})}else{self.postMessage({id:o,error:r.name})}};if(f)t(u,f,c);if(i)a(u,0,s,i,c)}}},{"./rusha.js":4}]},{},[3])(3)});