/*! rusha 2017-11-25 */

(function(){function e(a){"use strict";var n={getDataType:function(e){if(typeof e==="string"){return"string"}if(e instanceof Array){return"array"}if(typeof global!=="undefined"&&global.Buffer&&global.Buffer.isBuffer(e)){return"buffer"}if(e instanceof ArrayBuffer){return"arraybuffer"}if(e.buffer instanceof ArrayBuffer){return"view"}if(e instanceof Blob){return"blob"}throw new Error("Unsupported data type.")}};var t={fill:0};var f=function(e){for(e+=9;e%64>0;e+=1);return e};var i=function(e,r){var a=new Uint8Array(e.buffer);var n=r%4,t=r-n;switch(n){case 0:a[t+3]=0;case 1:a[t+2]=0;case 2:a[t+1]=0;case 3:a[t+0]=0}for(var f=(r>>2)+1;f<e.length;f++)e[f]=0};var s=function(e,r,a){e[r>>2]|=128<<24-(r%4<<3);e[((r>>2)+2&~15)+14]=a/(1<<29)|0;e[((r>>2)+2&~15)+15]=a<<3};var u=function(e,r,a,n,t){var f=this,i,s=t%4,u=(n+s)%4,o=n-u;switch(s){case 0:e[t]=f.charCodeAt(a+3);case 1:e[t+1-(s<<1)|0]=f.charCodeAt(a+2);case 2:e[t+2-(s<<1)|0]=f.charCodeAt(a+1);case 3:e[t+3-(s<<1)|0]=f.charCodeAt(a)}if(n<u+s){return}for(i=4-s;i<o;i=i+4|0){r[t+i>>2]=f.charCodeAt(a+i)<<24|f.charCodeAt(a+i+1)<<16|f.charCodeAt(a+i+2)<<8|f.charCodeAt(a+i+3)}switch(u){case 3:e[t+o+1|0]=f.charCodeAt(a+o+2);case 2:e[t+o+2|0]=f.charCodeAt(a+o+1);case 1:e[t+o+3|0]=f.charCodeAt(a+o)}};var o=function(e,r,a,n,t){var f=this,i,s=t%4,u=(n+s)%4,o=n-u;switch(s){case 0:e[t]=f[a+3];case 1:e[t+1-(s<<1)|0]=f[a+2];case 2:e[t+2-(s<<1)|0]=f[a+1];case 3:e[t+3-(s<<1)|0]=f[a]}if(n<u+s){return}for(i=4-s;i<o;i=i+4|0){r[t+i>>2|0]=f[a+i]<<24|f[a+i+1]<<16|f[a+i+2]<<8|f[a+i+3]}switch(u){case 3:e[t+o+1|0]=f[a+o+2];case 2:e[t+o+2|0]=f[a+o+1];case 1:e[t+o+3|0]=f[a+o]}};var c=function(e,a,n,t,f){var i=this,s,u=f%4,o=(t+u)%4,c=t-o;var h=new Uint8Array(r.readAsArrayBuffer(i.slice(n,n+t)));switch(u){case 0:e[f]=h[3];case 1:e[f+1-(u<<1)|0]=h[2];case 2:e[f+2-(u<<1)|0]=h[1];case 3:e[f+3-(u<<1)|0]=h[0]}if(t<o+u){return}for(s=4-u;s<c;s=s+4|0){a[f+s>>2|0]=h[s]<<24|h[s+1]<<16|h[s+2]<<8|h[s+3]}switch(o){case 3:e[f+c+1|0]=h[c+2];case 2:e[f+c+2|0]=h[c+1];case 1:e[f+c+3|0]=h[c]}};var h=function(e){switch(n.getDataType(e)){case"string":return u.bind(e);case"array":return o.bind(e);case"buffer":return o.bind(e);case"arraybuffer":return o.bind(new Uint8Array(e));case"view":return o.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return c.bind(e)}};var d=function(e,r){switch(n.getDataType(e)){case"string":return e.slice(r);case"array":return e.slice(r);case"buffer":return e.slice(r);case"arraybuffer":return e.slice(r);case"view":return e.buffer.slice(r)}};var v=new Array(256);for(var l=0;l<256;l++){v[l]=(l<16?"0":"")+l.toString(16)}var y=function(e){var r=new Uint8Array(e);var a=new Array(e.byteLength);for(var n=0;n<a.length;n++){a[n]=v[r[n]]}return a.join("")};var w=function(e){var r;if(e<=65536)return 65536;if(e<16777216){for(r=1;r<e;r=r<<1);}else{for(r=16777216;r<e;r+=16777216);}return r};var p=function(r){if(r%64>0){throw new Error("Chunk size must be a multiple of 128 bit")}t.offset=0;t.maxChunkLen=r;t.padMaxChunkLen=f(r);t.heap=new ArrayBuffer(w(t.padMaxChunkLen+320+20));t.h32=new Int32Array(t.heap);t.h8=new Int8Array(t.heap);t.core=new e._core({Int32Array:Int32Array,DataView:DataView},{},t.heap);t.buffer=null};p(a||64*1024);var b=function(e,r){t.offset=0;var a=new Int32Array(e,r+320,5);a[0]=1732584193;a[1]=-271733879;a[2]=-1732584194;a[3]=271733878;a[4]=-1009589776};var A=function(e,r){var a=f(e);var n=new Int32Array(t.heap,0,a>>2);i(n,e);s(n,e,r);return a};var g=function(e,r,a,n){h(e)(t.h8,t.h32,r,a,n||0)};var C=function(e,r,a,n,f){var i=a;g(e,r,a);if(f){i=A(a,n)}t.core.hash(i,t.padMaxChunkLen)};var L=function(e,r){var a=new Int32Array(e,r+320,5);var n=new Int32Array(5);var t=new DataView(n.buffer);t.setInt32(0,a[0],false);t.setInt32(4,a[1],false);t.setInt32(8,a[2],false);t.setInt32(12,a[3],false);t.setInt32(16,a[4],false);return n};var k=this.rawDigest=function(e){var r=e.byteLength||e.length||e.size||0;b(t.heap,t.padMaxChunkLen);var a=0,n=t.maxChunkLen;for(a=0;r>a+n;a+=n){C(e,a,n,r,false)}C(e,a,r-a,r,true);return L(t.heap,t.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return y(k(e).buffer)};this.resetState=function(){b(t.heap,t.padMaxChunkLen);return this};this.append=function(e){var r=0;var a=e.byteLength||e.length||e.size||0;var n=t.offset%t.maxChunkLen;var f;t.offset+=a;while(r<a){f=Math.min(a-r,t.maxChunkLen-n);g(e,r,f,n);n+=f;r+=f;if(n===t.maxChunkLen){t.core.hash(t.maxChunkLen,t.padMaxChunkLen);n=0}}return this};this.getState=function(){var e=t.offset%t.maxChunkLen;var r;if(!e){var a=new Int32Array(t.heap,t.padMaxChunkLen+320,5);r=a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength)}else{r=t.heap.slice(0)}return{offset:t.offset,heap:r}};this.setState=function(e){t.offset=e.offset;if(e.heap.byteLength===20){var r=new Int32Array(t.heap,t.padMaxChunkLen+320,5);r.set(new Int32Array(e.heap))}else{t.h32.set(new Int32Array(e.heap))}return this};var x=this.rawEnd=function(){var e=t.offset;var r=e%t.maxChunkLen;var a=A(r,e);t.core.hash(a,t.padMaxChunkLen);var n=L(t.heap,t.padMaxChunkLen);b(t.heap,t.padMaxChunkLen);return n};this.end=function(){return y(x().buffer)}}e._core=function e(r,a,n){"use asm";var t=new r.Int32Array(n);function f(e,r){e=e|0;r=r|0;var a=0,n=0,f=0,i=0,s=0,u=0,o=0,c=0,h=0,d=0,v=0,l=0,y=0,w=0;f=t[r+320>>2]|0;s=t[r+324>>2]|0;o=t[r+328>>2]|0;h=t[r+332>>2]|0;v=t[r+336>>2]|0;for(a=0;(a|0)<(e|0);a=a+64|0){i=f;u=s;c=o;d=h;l=v;for(n=0;(n|0)<64;n=n+4|0){w=t[a+n>>2]|0;y=((f<<5|f>>>27)+(s&o|~s&h)|0)+((w+v|0)+1518500249|0)|0;v=h;h=o;o=s<<30|s>>>2;s=f;f=y;t[e+n>>2]=w}for(n=e+64|0;(n|0)<(e+80|0);n=n+4|0){w=(t[n-12>>2]^t[n-32>>2]^t[n-56>>2]^t[n-64>>2])<<1|(t[n-12>>2]^t[n-32>>2]^t[n-56>>2]^t[n-64>>2])>>>31;y=((f<<5|f>>>27)+(s&o|~s&h)|0)+((w+v|0)+1518500249|0)|0;v=h;h=o;o=s<<30|s>>>2;s=f;f=y;t[n>>2]=w}for(n=e+80|0;(n|0)<(e+160|0);n=n+4|0){w=(t[n-12>>2]^t[n-32>>2]^t[n-56>>2]^t[n-64>>2])<<1|(t[n-12>>2]^t[n-32>>2]^t[n-56>>2]^t[n-64>>2])>>>31;y=((f<<5|f>>>27)+(s^o^h)|0)+((w+v|0)+1859775393|0)|0;v=h;h=o;o=s<<30|s>>>2;s=f;f=y;t[n>>2]=w}for(n=e+160|0;(n|0)<(e+240|0);n=n+4|0){w=(t[n-12>>2]^t[n-32>>2]^t[n-56>>2]^t[n-64>>2])<<1|(t[n-12>>2]^t[n-32>>2]^t[n-56>>2]^t[n-64>>2])>>>31;y=((f<<5|f>>>27)+(s&o|s&h|o&h)|0)+((w+v|0)-1894007588|0)|0;v=h;h=o;o=s<<30|s>>>2;s=f;f=y;t[n>>2]=w}for(n=e+240|0;(n|0)<(e+320|0);n=n+4|0){w=(t[n-12>>2]^t[n-32>>2]^t[n-56>>2]^t[n-64>>2])<<1|(t[n-12>>2]^t[n-32>>2]^t[n-56>>2]^t[n-64>>2])>>>31;y=((f<<5|f>>>27)+(s^o^h)|0)+((w+v|0)-899497514|0)|0;v=h;h=o;o=s<<30|s>>>2;s=f;f=y;t[n>>2]=w}f=f+i|0;s=s+u|0;o=o+c|0;h=h+d|0;v=v+l|0}t[r+320>>2]=f;t[r+324>>2]=s;t[r+328>>2]=o;t[r+332>>2]=h;t[r+336>>2]=v}return{hash:f}};if(typeof module!=="undefined"){module.exports=e}else if(typeof window!=="undefined"){window.Rusha=e}if(typeof FileReaderSync!=="undefined"){var r=new FileReaderSync;var a=function e(r,a,n){try{return n(null,r.digest(a))}catch(e){return n(e)}};var n=function e(r,a,t,f,i){var s=new self.FileReader;s.onloadend=function e(){if(s.error){return i(s.error)}var u=s.result;a+=s.result.byteLength;try{r.append(u)}catch(e){i(e);return}if(a<f.size){n(r,a,t,f,i)}else{i(null,r.end())}};s.readAsArrayBuffer(f.slice(a,a+t))};self.onmessage=function r(t){var f=t.data.data,i=t.data.file,s=t.data.id;if(typeof s==="undefined")return;if(!i&&!f)return;var u=t.data.blockSize||4*1024*1024;var o=new e(u);o.resetState();var c=function e(r,a){if(!r){self.postMessage({id:s,hash:a})}else{self.postMessage({id:s,error:r.name})}};if(f)a(o,f,c);if(i)n(o,0,u,i,c)}}})();