/*! rusha 2017-11-26 */

(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var r;if(typeof window!=="undefined"){r=window}else if(typeof global!=="undefined"){r=global}else if(typeof self!=="undefined"){r=self}else{r=this}r.Rusha=e()}})(function(){var e,r,t;return function e(r,t,n){function a(i,s){if(!t[i]){if(!r[i]){var o=typeof require=="function"&&require;if(!s&&o)return o(i,!0);if(f)return f(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[i]={exports:{}};r[i][0].call(c.exports,function(e){var t=r[i][1][e];return a(t?t:e)},c,c.exports,e,r,t,n)}return t[i].exports}var f=typeof require=="function"&&require;for(var i=0;i<n.length;i++)a(n[i]);return a}({1:[function(e,r,t){var n=arguments[3];var a=arguments[4];var f=arguments[5];var i=JSON.stringify;r.exports=function(e,r){var t;var s=Object.keys(f);for(var o=0,u=s.length;o<u;o++){var c=s[o];var h=f[c].exports;if(h===e||h&&h.default===e){t=c;break}}if(!t){t=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var d={};for(var o=0,u=s.length;o<u;o++){var c=s[o];d[c]=c}a[t]=["function(require,module,exports){"+e+"(self); }",d]}var v=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var l={};l[t]=t;a[v]=["function(require,module,exports){"+"var f = require("+i(t)+");"+"(f.default ? f.default : f)(self);"+"}",l];var p={};w(v);function w(e){p[e]=true;for(var r in a[e][1]){var t=a[e][1][r];if(!p[t]){w(t)}}}var y="("+n+")({"+Object.keys(p).map(function(e){return i(e)+":["+a[e][0]+","+i(a[e][1])+"]"}).join(",")+"},{},["+i(v)+"])";var b=window.URL||window.webkitURL||window.mozURL||window.msURL;var x=new Blob([y],{type:"text/javascript"});if(r&&r.bare){return x}var g=b.createObjectURL(x);var A=new Worker(g);A.objectURL=g;return A}},{}],2:[function(e,r,t){r.exports=function e(r,t,n){"use asm";var a=new r.Int32Array(n);function f(e,r){e=e|0;r=r|0;var t=0,n=0,f=0,i=0,s=0,o=0,u=0,c=0,h=0,d=0,v=0,l=0,p=0,w=0;f=a[r+320>>2]|0;s=a[r+324>>2]|0;u=a[r+328>>2]|0;h=a[r+332>>2]|0;v=a[r+336>>2]|0;for(t=0;(t|0)<(e|0);t=t+64|0){i=f;o=s;c=u;d=h;l=v;for(n=0;(n|0)<64;n=n+4|0){w=a[t+n>>2]|0;p=((f<<5|f>>>27)+(s&u|~s&h)|0)+((w+v|0)+1518500249|0)|0;v=h;h=u;u=s<<30|s>>>2;s=f;f=p;a[e+n>>2]=w}for(n=e+64|0;(n|0)<(e+80|0);n=n+4|0){w=(a[n-12>>2]^a[n-32>>2]^a[n-56>>2]^a[n-64>>2])<<1|(a[n-12>>2]^a[n-32>>2]^a[n-56>>2]^a[n-64>>2])>>>31;p=((f<<5|f>>>27)+(s&u|~s&h)|0)+((w+v|0)+1518500249|0)|0;v=h;h=u;u=s<<30|s>>>2;s=f;f=p;a[n>>2]=w}for(n=e+80|0;(n|0)<(e+160|0);n=n+4|0){w=(a[n-12>>2]^a[n-32>>2]^a[n-56>>2]^a[n-64>>2])<<1|(a[n-12>>2]^a[n-32>>2]^a[n-56>>2]^a[n-64>>2])>>>31;p=((f<<5|f>>>27)+(s^u^h)|0)+((w+v|0)+1859775393|0)|0;v=h;h=u;u=s<<30|s>>>2;s=f;f=p;a[n>>2]=w}for(n=e+160|0;(n|0)<(e+240|0);n=n+4|0){w=(a[n-12>>2]^a[n-32>>2]^a[n-56>>2]^a[n-64>>2])<<1|(a[n-12>>2]^a[n-32>>2]^a[n-56>>2]^a[n-64>>2])>>>31;p=((f<<5|f>>>27)+(s&u|s&h|u&h)|0)+((w+v|0)-1894007588|0)|0;v=h;h=u;u=s<<30|s>>>2;s=f;f=p;a[n>>2]=w}for(n=e+240|0;(n|0)<(e+320|0);n=n+4|0){w=(a[n-12>>2]^a[n-32>>2]^a[n-56>>2]^a[n-64>>2])<<1|(a[n-12>>2]^a[n-32>>2]^a[n-56>>2]^a[n-64>>2])>>>31;p=((f<<5|f>>>27)+(s^u^h)|0)+((w+v|0)-899497514|0)|0;v=h;h=u;u=s<<30|s>>>2;s=f;f=p;a[n>>2]=w}f=f+i|0;s=s+o|0;u=u+c|0;h=h+d|0;v=v+l|0}a[r+320>>2]=f;a[r+324>>2]=s;a[r+328>>2]=u;a[r+332>>2]=h;a[r+336>>2]=v}return{hash:f}}},{}],3:[function(e,r,t){var n=e("./rusha.js");var a=e("./utils.js");function f(){this._rusha=new n;this._rusha.resetState()}f.prototype.update=function e(r){this._rusha.append(r);return this};f.prototype.digest=function e(r){var e=this._rusha.rawEnd().buffer;if(!r){return e}if(r==="hex"){return a.toHex(e)}throw new Error("unsupported digest encoding")};r.exports=function e(){return new f}},{"./rusha.js":5,"./utils.js":6}],4:[function(e,r,t){"use strict";var n=e("webworkify");var a=e("./rusha.js");var f=e("./hash.js");if(typeof FileReaderSync!=="undefined"&&typeof DedicatedWorkerGlobalScope!=="undefined"){a.disableWorkerBehaviour=e("./worker")()}else{a.disableWorkerBehaviour=function(){}}a.createWorker=function r(){var t=n(e("./worker"));var a=t.terminate;t.terminate=function(){URL.revokeObjectURL(t.objectURL);a.call(t)};return t};a.createHash=f;r.exports=a},{"./hash.js":3,"./rusha.js":5,"./worker":7,webworkify:1}],5:[function(e,r,t){(function(t){"use strict";var n=e("./core.sjs");var a=e("./utils");r.exports=function e(r){var i=function(e){if(typeof e==="string"){return"string"}if(e instanceof Array){return"array"}if(typeof t!=="undefined"&&t.Buffer&&t.Buffer.isBuffer(e)){return"buffer"}if(e instanceof ArrayBuffer){return"arraybuffer"}if(e.buffer instanceof ArrayBuffer){return"view"}if(e instanceof Blob){return"blob"}throw new Error("Unsupported data type.")};var s={};var o=function(e){for(e+=9;e%64>0;e+=1);return e};var u=function(e,r){var t=new Uint8Array(e.buffer);var n=r%4,a=r-n;switch(n){case 0:t[a+3]=0;case 1:t[a+2]=0;case 2:t[a+1]=0;case 3:t[a+0]=0}for(var f=(r>>2)+1;f<e.length;f++)e[f]=0};var c=function(e,r,t){e[r>>2]|=128<<24-(r%4<<3);e[((r>>2)+2&~15)+14]=t/(1<<29)|0;e[((r>>2)+2&~15)+15]=t<<3};var h=function(e,r,t,n,a){var f=this,i,s=a%4,o=(n+s)%4,u=n-o;switch(s){case 0:e[a]=f.charCodeAt(t+3);case 1:e[a+1-(s<<1)|0]=f.charCodeAt(t+2);case 2:e[a+2-(s<<1)|0]=f.charCodeAt(t+1);case 3:e[a+3-(s<<1)|0]=f.charCodeAt(t)}if(n<o+s){return}for(i=4-s;i<u;i=i+4|0){r[a+i>>2]=f.charCodeAt(t+i)<<24|f.charCodeAt(t+i+1)<<16|f.charCodeAt(t+i+2)<<8|f.charCodeAt(t+i+3)}switch(o){case 3:e[a+u+1|0]=f.charCodeAt(t+u+2);case 2:e[a+u+2|0]=f.charCodeAt(t+u+1);case 1:e[a+u+3|0]=f.charCodeAt(t+u)}};var d=function(e,r,t,n,a){var f=this,i,s=a%4,o=(n+s)%4,u=n-o;switch(s){case 0:e[a]=f[t+3];case 1:e[a+1-(s<<1)|0]=f[t+2];case 2:e[a+2-(s<<1)|0]=f[t+1];case 3:e[a+3-(s<<1)|0]=f[t]}if(n<o+s){return}for(i=4-s;i<u;i=i+4|0){r[a+i>>2|0]=f[t+i]<<24|f[t+i+1]<<16|f[t+i+2]<<8|f[t+i+3]}switch(o){case 3:e[a+u+1|0]=f[t+u+2];case 2:e[a+u+2|0]=f[t+u+1];case 1:e[a+u+3|0]=f[t+u]}};var v=function(e,r,t,n,a){var i=this,s,o=a%4,u=(n+o)%4,c=n-u;var h=new Uint8Array(f.readAsArrayBuffer(i.slice(t,t+n)));switch(o){case 0:e[a]=h[3];case 1:e[a+1-(o<<1)|0]=h[2];case 2:e[a+2-(o<<1)|0]=h[1];case 3:e[a+3-(o<<1)|0]=h[0]}if(n<u+o){return}for(s=4-o;s<c;s=s+4|0){r[a+s>>2|0]=h[s]<<24|h[s+1]<<16|h[s+2]<<8|h[s+3]}switch(u){case 3:e[a+c+1|0]=h[c+2];case 2:e[a+c+2|0]=h[c+1];case 1:e[a+c+3|0]=h[c]}};var l=function(e){switch(i(e)){case"string":return h.bind(e);case"array":return d.bind(e);case"buffer":return d.bind(e);case"arraybuffer":return d.bind(new Uint8Array(e));case"view":return d.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return v.bind(e)}};var p=function(e,r){switch(i(e)){case"string":return e.slice(r);case"array":return e.slice(r);case"buffer":return e.slice(r);case"arraybuffer":return e.slice(r);case"view":return e.buffer.slice(r)}};var w=function(e){if(e%64>0){throw new Error("Chunk size must be a multiple of 128 bit")}s.offset=0;s.maxChunkLen=e;s.padMaxChunkLen=o(e);s.heap=new ArrayBuffer(a.ceilHeapSize(s.padMaxChunkLen+320+20));s.h32=new Int32Array(s.heap);s.h8=new Int8Array(s.heap);s.core=new n({Int32Array:Int32Array},{},s.heap);s.buffer=null};w(r||64*1024);var y=function(e,r){s.offset=0;var t=new Int32Array(e,r+320,5);t[0]=1732584193;t[1]=-271733879;t[2]=-1732584194;t[3]=271733878;t[4]=-1009589776};var b=function(e,r){var t=o(e);var n=new Int32Array(s.heap,0,t>>2);u(n,e);c(n,e,r);return t};var x=function(e,r,t,n){l(e)(s.h8,s.h32,r,t,n||0)};var g=function(e,r,t,n,a){var f=t;x(e,r,t);if(a){f=b(t,n)}s.core.hash(f,s.padMaxChunkLen)};var A=function(e,r){var t=new Int32Array(e,r+320,5);var n=new Int32Array(5);var a=new DataView(n.buffer);a.setInt32(0,t[0],false);a.setInt32(4,t[1],false);a.setInt32(8,t[2],false);a.setInt32(12,t[3],false);a.setInt32(16,t[4],false);return n};var k=this.rawDigest=function(e){var r=e.byteLength||e.length||e.size||0;y(s.heap,s.padMaxChunkLen);var t=0,n=s.maxChunkLen;for(t=0;r>t+n;t+=n){g(e,t,n,r,false)}g(e,t,r-t,r,true);return A(s.heap,s.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return a.toHex(k(e).buffer)};this.resetState=function(){y(s.heap,s.padMaxChunkLen);return this};this.append=function(e){var r=0;var t=e.byteLength||e.length||e.size||0;var n=s.offset%s.maxChunkLen;var a;s.offset+=t;while(r<t){a=Math.min(t-r,s.maxChunkLen-n);x(e,r,a,n);n+=a;r+=a;if(n===s.maxChunkLen){s.core.hash(s.maxChunkLen,s.padMaxChunkLen);n=0}}return this};this.getState=function(){var e=s.offset%s.maxChunkLen;var r;if(!e){var t=new Int32Array(s.heap,s.padMaxChunkLen+320,5);r=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}else{r=s.heap.slice(0)}return{offset:s.offset,heap:r}};this.setState=function(e){s.offset=e.offset;if(e.heap.byteLength===20){var r=new Int32Array(s.heap,s.padMaxChunkLen+320,5);r.set(new Int32Array(e.heap))}else{s.h32.set(new Int32Array(e.heap))}return this};var L=this.rawEnd=function(){var e=s.offset;var r=e%s.maxChunkLen;var t=b(r,e);s.core.hash(t,s.padMaxChunkLen);var n=A(s.heap,s.padMaxChunkLen);y(s.heap,s.padMaxChunkLen);return n};this.end=function(){return a.toHex(L().buffer)}};r.exports._core=n;if(typeof FileReaderSync!=="undefined"){var f=new FileReaderSync}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./core.sjs":2,"./utils":6}],6:[function(e,r,t){"use strict";var n=new Array(256);for(var a=0;a<256;a++){n[a]=(a<16?"0":"")+a.toString(16)}r.exports.toHex=function(e){var r=new Uint8Array(e);var t=new Array(e.byteLength);for(var a=0;a<t.length;a++){t[a]=n[r[a]]}return t.join("")};r.exports.ceilHeapSize=function(e){var r;if(e<=65536)return 65536;if(e<16777216){for(r=1;r<e;r=r<<1);}else{for(r=16777216;r<e;r+=16777216);}return r}},{}],7:[function(e,r,t){"use strict";r.exports=function r(){var t=e("./rusha.js");var n=function e(r,t,n){try{return n(null,r.digest(t))}catch(e){return n(e)}};var a=function e(r,t,n,a,f){var i=new self.FileReader;i.onloadend=function s(){if(i.error){return f(i.error)}var o=i.result;t+=i.result.byteLength;try{r.append(o)}catch(e){f(e);return}if(t<a.size){e(r,t,n,a,f)}else{f(null,r.end())}};i.readAsArrayBuffer(a.slice(t,t+n))};var f=true;self.onmessage=function e(r){if(!f){return}var i=r.data.data,s=r.data.file,o=r.data.id;if(typeof o==="undefined")return;if(!s&&!i)return;var u=r.data.blockSize||4*1024*1024;var c=new t(u);c.resetState();var h=function e(r,t){if(!r){self.postMessage({id:o,hash:t})}else{self.postMessage({id:o,error:r.name})}};if(i)n(c,i,h);if(s)a(c,0,u,s,h)};return function e(){f=false}}},{"./rusha.js":5}]},{},[4])(4)});